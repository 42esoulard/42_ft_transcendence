{"openapi":"3.0.0","paths":{"/":{"get":{"operationId":"getHello","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"string"}}}}}}},"/favicon.ico":{"get":{"operationId":"create","parameters":[],"responses":{"204":{"description":"No Content"}}}},"/users":{"get":{"operationId":"getUsers","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}},"tags":["User"]},"post":{"operationId":"saveUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["User"]}},"/users/banned":{"get":{"operationId":"getBannedUsers","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}},"tags":["User"]}},"/users/delete/{id}":{"get":{"operationId":"removeUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":""}},"tags":["User"]}},"/users/{id}":{"get":{"operationId":"getUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"The user has been found in database","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid ID supplied"},"404":{"description":"User not found"}},"tags":["User"]}},"/users/name/{username}":{"get":{"operationId":"getUserByUsername","parameters":[{"name":"username","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The user has been found in database","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid username supplied"},"404":{"description":"User not found"}},"tags":["User"]}},"/users/login/{login}":{"get":{"operationId":"getUserByLogin","parameters":[{"name":"login","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The user has been found in database","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}},"400":{"description":"Invalid login supplied"},"404":{"description":"User not found"}},"tags":["User"]}},"/users/update-user":{"post":{"operationId":"updateUser","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["User"]}},"/users/upload":{"post":{"operationId":"uploadFile","parameters":[],"responses":{"201":{"description":""}},"tags":["User"],"security":[{"cookie":[]}]}},"/users/avatars/{imgpath}":{"get":{"operationId":"getAvatar","parameters":[{"name":"imgpath","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":""}},"tags":["User"],"security":[{"cookie":[]}]}},"/messages":{"post":{"operationId":"saveMessage","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateMessageDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Message"}}}}},"tags":["Chat"]}},"/channels":{"get":{"operationId":"getChannels","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Channel"}}}}}},"tags":["Chat"]},"post":{"operationId":"saveChannel","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateChannelDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelMember"}}}}},"tags":["Chat"]}},"/channels/{id}":{"get":{"operationId":"getChannelById","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"The channel has been found in database","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"400":{"description":"Invalid ID supplied"},"404":{"description":"Channel not found"}},"tags":["Chat"]}},"/channels/name/{name}":{"get":{"operationId":"getChannelByName","parameters":[{"name":"name","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"The channel has been found in database","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}},"400":{"description":"Invalid ID supplied"},"404":{"description":"Channel not found"}},"tags":["Chat"]}},"/channels/join-channel/{channel}/{user}":{"get":{"operationId":"joinChannel","parameters":[{"name":"channel","required":true,"in":"path","schema":{"type":"number"}},{"name":"user","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelMember"}}}}},"tags":["Chat"]}},"/channels/join-protected/{channel}/{attempt}":{"get":{"operationId":"checkPasswordMatch","parameters":[{"name":"channel","required":true,"in":"path","schema":{"type":"number"}},{"name":"attempt","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"boolean"}}}}},"tags":["Chat"]}},"/channels/user/{id}":{"get":{"operationId":"getUserChannels","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMember"}}}}}},"tags":["Chat"]}},"/channels/avail/{id}":{"get":{"operationId":"getAvailableChannels","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Channel"}}}}}},"tags":["Chat"]}},"/channels/channel-member/{channel}/{user}":{"get":{"operationId":"getChannelMember","parameters":[{"name":"channel","required":true,"in":"path","schema":{"type":"number"}},{"name":"user","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelMember"}}}}},"tags":["Chat"]}},"/channels/leave-channel/{cm_id}":{"post":{"operationId":"leaveChannel","parameters":[{"name":"cm_id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"201":{"description":""}},"tags":["Chat"]}},"/channels/delete-channel/{chan_id}":{"post":{"operationId":"deleteChannel","parameters":[{"name":"chan_id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"201":{"description":""}},"tags":["Chat"]}},"/channels/admin-action/{action}/{cm_id}/{end_date}":{"get":{"operationId":"muteBanMember","parameters":[{"name":"action","required":true,"in":"path","schema":{"type":"string"}},{"name":"cm_id","required":true,"in":"path","schema":{"type":"number"}},{"name":"end_date","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelMember"}}}}},"tags":["Chat"]}},"/channels/toggle-admin/{cm_id}":{"get":{"operationId":"toggleAdmin","parameters":[{"name":"cm_id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChannelMember"}}}}},"tags":["Chat"]}},"/channels/update-pwd/{chan_id}/{pwd}":{"get":{"operationId":"updateChannelPassword","parameters":[{"name":"chan_id","required":true,"in":"path","schema":{"type":"number"}},{"name":"pwd","required":true,"in":"path","schema":{"type":"string"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Channel"}}}}},"tags":["Chat"]}},"/auth/42/login":{"get":{"operationId":"login","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}},"tags":["Auth"],"security":[{"oauth2":["users"]}]}},"/auth/fake-login":{"post":{"operationId":"fakeLogin","parameters":[],"responses":{"201":{"description":""}},"tags":["Auth"]}},"/auth/refreshtoken":{"get":{"operationId":"refreshToken","parameters":[],"responses":{"200":{"description":""}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/auth/status":{"get":{"operationId":"status","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/auth/profile":{"get":{"operationId":"profile","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/auth/logout":{"get":{"operationId":"logout","parameters":[],"responses":{"200":{"description":""}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/auth":{"get":{"operationId":"findAll","parameters":[],"responses":{"200":{"description":""}},"tags":["Auth"]}},"/auth/2fa/generate":{"get":{"operationId":"register","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"object"}}}}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/auth/2fa/key":{"get":{"operationId":"getKey","parameters":[],"responses":{"200":{"description":""}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/auth/2fa/turn-on":{"post":{"operationId":"turnOnTwoFactorAuthentication","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFactorDto"}}}},"responses":{"201":{"description":""}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/auth/2fa/turn-off":{"get":{"operationId":"turnOffTwoFactorAuthentication","parameters":[],"responses":{"200":{"description":""}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/auth/2fa/authenticate":{"post":{"operationId":"authenticate","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TwoFactorDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/User"}}}}},"tags":["Auth"],"security":[{"cookie":[]}]}},"/relationships/friendships/{id}":{"get":{"operationId":"getUserFriendships","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Relationship"}}}}}},"tags":["Relationship"]}},"/relationships/allfriendships/{id}":{"get":{"operationId":"getAllUserFriendships","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Relationship"}}}}}},"tags":["Relationship"]}},"/relationships/blocked/{id}":{"get":{"operationId":"getUserBlocked","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Relationship"}}}}}},"tags":["Relationship"]}},"/relationships":{"post":{"operationId":"saveRelationship","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateRelationshipDto"}}}},"responses":{"201":{"description":"","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Relationship"}}}}},"tags":["Relationship"]},"delete":{"operationId":"removeRelationship","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RemoveRelationshipDto"}}}},"responses":{"200":{"description":""}},"tags":["Relationship"]}},"/relationships/validate-relationship":{"post":{"operationId":"validateRelationship","parameters":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ValidateRelationshipDto"}}}},"responses":{"201":{"description":""}},"tags":["Relationship"]}},"/pong":{"get":{"operationId":"getAll","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Game"}}}}}},"tags":["Pong"]}},"/pong/onGoingGames":{"get":{"operationId":"GetOnGoingGames","parameters":[],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Game"}}}}}},"tags":["Pong"]}},"/pong/user-games/{id}":{"get":{"operationId":"getUserGameUser","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/GameUser"}}}}}},"tags":["Pong"]}},"/pong/games/{id}":{"get":{"operationId":"getGamebyId","parameters":[{"name":"id","required":true,"in":"path","schema":{"type":"number"}}],"responses":{"200":{"description":"The game has been found in database","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Game"}}}},"400":{"description":"Invalid ID supplied"},"404":{"description":"Game not found"}},"tags":["Pong"]}}},"info":{"title":"ft_transcendence API","description":"Because we will nail it !","version":"1.0","contact":{}},"tags":[],"servers":[{"url":"http://localhost:3000"}],"components":{"securitySchemes":{"oauth2":{"type":"oauth2","flows":{}},"cookie":{"type":"apiKey","in":"cookie","name":"tokens"}},"schemas":{"GameStats":{"type":"object","properties":{"id":{"type":"number"},"ladderLevel":{"type":"number"},"user":{"$ref":"#/components/schemas/Users"}},"required":["id","ladderLevel","user"]},"Game":{"type":"object","properties":{"id":{"type":"number"},"gameMode":{"type":"string"},"score1":{"type":"number"},"score2":{"type":"number"},"startedAt":{"format":"date-time","type":"string"},"users":{"type":"array","items":{"$ref":"#/components/schemas/GameUser"}}},"required":["id","gameMode","score1","score2","startedAt","users"]},"GameUser":{"type":"object","properties":{"won":{"type":"boolean"},"userId":{"type":"number"},"user":{"$ref":"#/components/schemas/Users"},"gameId":{"type":"number"},"game":{"$ref":"#/components/schemas/Game"}},"required":["won","userId","user","gameId","game"]},"Messages":{"type":"object","properties":{"id":{"type":"number"},"channel":{"$ref":"#/components/schemas/Channels"},"author":{"$ref":"#/components/schemas/Users"},"content":{"type":"string"},"created_at":{"format":"date-time","type":"string"}},"required":["id","channel","author","content","created_at"]},"Relationships":{"type":"object","properties":{"id":{"type":"number"},"requesterId":{"type":"number"},"requester":{"$ref":"#/components/schemas/Users"},"adresseeId":{"type":"number"},"adressee":{"$ref":"#/components/schemas/Users"},"pending":{"type":"boolean"},"nature":{"type":"string"},"created_at":{"format":"date-time","type":"string"}},"required":["id","requesterId","requester","adresseeId","adressee","pending","nature","created_at"]},"Users":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string"},"forty_two_login":{"type":"string"},"avatar":{"type":"string"},"two_fa_secret":{"type":"string"},"two_fa_enabled":{"type":"boolean"},"banned":{"type":"boolean"},"refresh_token":{"type":"string"},"expiry_date":{"format":"date-time","type":"string"},"created_at":{"format":"date-time","type":"string"},"gameStats":{"$ref":"#/components/schemas/GameStats"},"games":{"type":"array","items":{"$ref":"#/components/schemas/GameUser"}},"messages":{"type":"array","items":{"$ref":"#/components/schemas/Messages"}},"channel_members":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMembers"}},"relationships_requested":{"type":"array","items":{"$ref":"#/components/schemas/Relationships"}},"relationships_adressed":{"type":"array","items":{"$ref":"#/components/schemas/Relationships"}}},"required":["id","username","forty_two_login","avatar","two_fa_secret","two_fa_enabled","banned","refresh_token","expiry_date","created_at","gameStats","games","messages","channel_members","relationships_requested","relationships_adressed"]},"ChannelMembers":{"type":"object","properties":{"id":{"type":"number"},"channel":{"$ref":"#/components/schemas/Channels"},"member":{"$ref":"#/components/schemas/Users"},"is_owner":{"type":"boolean"},"is_admin":{"type":"boolean"},"ban":{"type":"string"},"mute":{"type":"string"},"created_at":{"format":"date-time","type":"string"}},"required":["id","channel","member","is_owner","is_admin","ban","mute","created_at"]},"Channels":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"type":{"type":"string"},"password":{"type":"string"},"channel_members":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMembers"}},"messages":{"type":"array","items":{"$ref":"#/components/schemas/Messages"}},"created_at":{"format":"date-time","type":"string"}},"required":["id","name","type","password","channel_members","messages","created_at"]},"Message":{"type":"object","properties":{"id":{"type":"number"},"channel":{"$ref":"#/components/schemas/Channels"},"author":{"$ref":"#/components/schemas/Users"},"content":{"type":"string"},"created_at":{"format":"date-time","type":"string"}},"required":["id","channel","author","content","created_at"]},"Channel":{"type":"object","properties":{"id":{"type":"number"},"name":{"type":"string"},"type":{"type":"string"},"password":{"type":"string"},"messages":{"type":"array","items":{"$ref":"#/components/schemas/Message"}},"channel_members":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMember"}},"created_at":{"format":"date-time","type":"string"}},"required":["id","name","type","password","messages","channel_members","created_at"]},"Relationship":{"type":"object","properties":{"id":{"type":"number"},"pending":{"type":"boolean"},"created_at":{"format":"date-time","type":"string"},"requesterId":{"type":"number"},"adresseeId":{"type":"number"},"nature":{"type":"string"}},"required":["id","pending","created_at","requesterId","adresseeId"]},"User":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string"},"created_at":{"format":"date-time","type":"string"},"forty_two_login":{"type":"string"},"avatar":{"type":"string"},"two_fa_secret":{"type":"string"},"two_fa_enabled":{"type":"boolean"},"refresh_token":{"type":"string"},"banned":{"type":"boolean"},"expiry_date":{"format":"date-time","type":"string"},"messages":{"type":"array","items":{"$ref":"#/components/schemas/Message"}},"channel_members":{"type":"array","items":{"$ref":"#/components/schemas/ChannelMember"}},"games":{"type":"array","items":{"$ref":"#/components/schemas/GameUser"}},"relationships_requested":{"type":"array","items":{"$ref":"#/components/schemas/Relationship"}},"relationships_adressed":{"type":"array","items":{"$ref":"#/components/schemas/Relationship"}}},"required":["id","username"]},"ChannelMember":{"type":"object","properties":{"id":{"type":"number"},"channel":{"$ref":"#/components/schemas/Channel"},"member":{"$ref":"#/components/schemas/User"},"is_owner":{"type":"boolean"},"is_admin":{"type":"boolean"},"mute":{"type":"string","nullable":true},"ban":{"type":"string","nullable":true}},"required":["id","channel","member","is_owner","is_admin","mute","ban"]},"CreateUserDto":{"type":"object","properties":{"username":{"type":"string"},"forty_two_login":{"type":"string"},"two_fa_enabled":{"type":"boolean"},"banned":{"type":"boolean"},"expiry_date":{"format":"date-time","type":"string"},"avatar":{"type":"string"}},"required":["username","forty_two_login","two_fa_enabled"]},"UpdateUserDto":{"type":"object","properties":{"id":{"type":"number"},"username":{"type":"string"},"two_fa_enabled":{"type":"boolean"},"avatar":{"type":"string"},"banned":{"type":"boolean"}},"required":["id"]},"CreateMessageDto":{"type":"object","properties":{"channel_id":{"type":"number"},"author_id":{"type":"number"},"content":{"type":"string"}},"required":["channel_id","author_id","content"]},"CreateChannelDto":{"type":"object","properties":{"name":{"type":"string"},"owner_id":{"type":"number"},"password":{"type":"string"},"type":{"type":"string"}},"required":["name","owner_id","password","type"]},"TwoFactorDto":{"type":"object","properties":{"code":{"type":"string"}},"required":["code"]},"CreateRelationshipDto":{"type":"object","properties":{"requesterId":{"type":"number"},"adresseeId":{"type":"number"},"nature":{"type":"string"}},"required":["requesterId","adresseeId"]},"ValidateRelationshipDto":{"type":"object","properties":{"adresseeId":{"type":"number"},"requesterId":{"type":"number"}},"required":["adresseeId","requesterId"]},"RemoveRelationshipDto":{"type":"object","properties":{"userId1":{"type":"number"},"userId2":{"type":"number"},"nature":{"type":"string"}},"required":["userId1","userId2"]}}}}